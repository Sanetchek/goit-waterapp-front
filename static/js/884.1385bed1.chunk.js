"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[884],{3884:(e,s,r)=>{r.r(s),r.d(s,{default:()=>_});var a=r(5043),t=r(3003),n=r(3892),o=r(899);const l=o.Ik().shape({name:o.Yj().required("Please enter your name!").min(2,"Name must be at least 2 characters long.").max(20,"Name must be less than 20 characters long."),email:o.Yj().required("Please enter your email address.").matches(/^[^@]+@[^@]+\.[^@]+$/,"Please enter a valid email address.").email("Invalid email."),gender:o.Yj().oneOf(["woman","man",""],'Gender must be either "woman" or "man".'),password:o.Yj().min(8,"The passsword must contain at least 4 symbols!").max(64,"The password must contain no more than 8 characters!"),newPassword:o.Yj().min(8,"The password must contain at least 4 symbols!").max(64,"The password must contain no more than 8 characters!"),newPasswordRepeat:o.Yj().min(8,"The password must contain at least 4 symbols!").max(64,"The password must contain no more than 8 characters!").oneOf([o.KR("newPassword"),null],"Passwords must match!")});var i=r(3768),m=r(3978);const p={passwordTitle:"UserSettingsForm_passwordTitle__dSurm",imageTitle:"UserSettingsForm_imageTitle__MD5jd",formWrapper:"UserSettingsForm_formWrapper__ujyOt",imageWrapper:"UserSettingsForm_imageWrapper__U8Q4Q",image:"UserSettingsForm_image__+uTGC",upload:"UserSettingsForm_upload__t9HPd",imageInput:"UserSettingsForm_imageInput__jEiRz",uploadIcon:"UserSettingsForm_uploadIcon__0dJZK",text:"UserSettingsForm_text__EFO7E",inputTitle:"UserSettingsForm_inputTitle__ESP2R",genderInputWrapper:"UserSettingsForm_genderInputWrapper__sP33D",genderButton:"UserSettingsForm_genderButton__Z0gIT",userInroWrapper:"UserSettingsForm_userInroWrapper__RJtcK",userInputWrap:"UserSettingsForm_userInputWrap__dhGBC",userInputTitle:"UserSettingsForm_userInputTitle__stZDh",userInput:"UserSettingsForm_userInput__0SRz+",error:"UserSettingsForm_error__1O6VL",accentText:"UserSettingsForm_accentText__7Kn5v",iconImportant:"UserSettingsForm_iconImportant__OOWTR",accentTextL:"UserSettingsForm_accentTextL__rS9Gm",header:"UserSettingsForm_header__nswTc",label:"UserSettingsForm_label__DuSbd",formGroupPassword:"UserSettingsForm_formGroupPassword__yDKPK",input:"UserSettingsForm_input__7fym4",errorMessage:"UserSettingsForm_errorMessage__NPkUw",inputWrapper:"UserSettingsForm_inputWrapper__mv+is",buttonWrapper:"UserSettingsForm_buttonWrapper__gGKFi",passwordToggleIcon:"UserSettingsForm_passwordToggleIcon__lk76R",btnWrapper:"UserSettingsForm_btnWrapper__eG2bt",placeholder:"UserSettingsForm_placeholder__qf4U-",flexWrap:"UserSettingsForm_flexWrap__RvIfu",settingsWrapper:"UserSettingsForm_settingsWrapper__cqFYn",userWrapper:"UserSettingsForm_userWrapper__Bkg+5",userSettings:"UserSettingsForm_userSettings__-yspq",formFlexWrapper:"UserSettingsForm_formFlexWrapper__xqYgJ",formFlexItem:"UserSettingsForm_formFlexItem__mnUxu",passwordWrapper:"UserSettingsForm_passwordWrapper__ltSFO",cancelButton:"UserSettingsForm_cancelButton__nvpjo"};var c=r(7920),d=r(1672),u=r(579);const _=e=>{let{onClose:s}=e;const r=(0,t.wA)(),o=(0,t.d4)(m.mB)||{},{_id:_,name:g,email:h,gender:x,avatar:w}=o,j=(0,a.useRef)(null),[S,N]=(0,a.useState)(w||null),[F,U]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!1),[I,W]=(0,a.useState)(!1);(0,a.useEffect)((()=>{N(w||null)}),[w]);const f=(0,a.useCallback)((async e=>{const s=e.target.files[0];if(s){const e=URL.createObjectURL(s);N(e);try{await r((0,d.xG)({userId:_,avatarFile:s})),i.oR.success("Avatar updated successfully!")}catch(a){i.oR.error("Error updating avatar. Please try again."),console.error("Avatar update error:",a)}}}),[r,_]),y=async e=>{try{const a=Object.fromEntries(Object.entries(e).filter((e=>{let[s,r]=e;return""!==r&&!["avatar","repeatPassword"].includes(s)})));await r((0,d.TK)({userId:_,userData:a})),i.oR.success("User updated successfully!"),(async()=>{await r((0,d.wz)(_))})(),s()}catch(a){i.oR.error("Error updating user. Please try again."),console.error("Submission error:",a)}},T=e=>()=>{e((e=>!e))},P=g?g.charAt(0).toUpperCase():"",$={name:g||"",email:h||"",gender:x||"woman",oldPassword:"",password:"",repeatPassword:""};return(0,u.jsx)(n.l1,{initialValues:$,validationSchema:l,onSubmit:(e,s)=>{y(e),s.setSubmitting(!1)},children:e=>{let{setFieldValue:s,isSubmitting:r}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(n.lV,{children:[(0,u.jsxs)("div",{className:p.settingsWrapper,children:[(0,u.jsxs)("div",{className:p.userWrapper,children:[(0,u.jsx)("p",{className:p.imageTitle,children:"Your Photo"}),(0,u.jsxs)("div",{className:p.imageWrapper,children:[(0,u.jsx)("div",{className:p.imageContainer,children:S?(0,u.jsx)("img",{className:p.image,src:S,loading:"lazy",alt:"User avatar",width:"75",height:"75"}):(0,u.jsx)("div",{className:p.placeholder,children:P})}),(0,u.jsxs)("label",{className:p.upload,children:[(0,u.jsx)("input",{className:p.imageInput,type:"file",accept:"image/*",onChange:e=>{f(e),s("avatar",e.currentTarget.files[0])},ref:j}),(0,u.jsx)("svg",{className:p.uploadIcon,width:"18",height:"18",children:(0,u.jsx)("use",{xlinkHref:`${c.A}#icon-upload`})}),(0,u.jsx)("p",{className:p.text,children:"Upload a photo"})]})]}),(0,u.jsxs)("div",{className:p.formWrapper,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:p.inputTitle,children:"Your gender identity"}),(0,u.jsxs)("div",{className:p.genderInputWrapper,children:[(0,u.jsxs)("label",{className:`${p.genderButton} ${p.text}`,children:[(0,u.jsx)(n.D0,{type:"radio",name:"gender",value:"woman",className:p.genderInput}),"Woman"]}),(0,u.jsxs)("label",{className:`${p.genderButton} ${p.text}`,children:[(0,u.jsx)(n.D0,{type:"radio",name:"gender",value:"man",className:p.genderInput}),"Man"]})]}),(0,u.jsx)(n.Kw,{name:"gender",component:"p",className:p.error})]}),(0,u.jsx)("div",{className:p.formFlexWrapper,children:(0,u.jsx)("div",{className:p.formFlexItem,children:(0,u.jsxs)("div",{className:p.userInfoWrapper,children:[(0,u.jsxs)("div",{className:p.userInputWrap,children:[(0,u.jsx)("label",{className:p.userInputTitle,htmlFor:"name",children:"Your name"}),(0,u.jsx)(n.D0,{type:"text",name:"name",id:"name",className:`${p.userInput} ${p.userSettings} ${p.text}`}),(0,u.jsx)(n.Kw,{name:"name",component:"p",className:p.error})]}),(0,u.jsxs)("div",{className:p.userInputWrap,children:[(0,u.jsx)("label",{className:p.userInputTitle,htmlFor:"email",children:"Email"}),(0,u.jsx)(n.D0,{type:"text",name:"email",id:"email",className:`${p.userInput} ${p.userSettings} ${p.text}`}),(0,u.jsx)(n.Kw,{name:"email",component:"p",className:p.error})]})]})})})]})]}),(0,u.jsxs)("div",{className:p.passwordWrapper,children:[(0,u.jsx)("h2",{className:p.passwordTitle,children:"Password"}),(0,u.jsxs)("div",{className:p.formGroupPassword,children:[(0,u.jsx)("label",{className:p.label,children:"Outdated password:"}),(0,u.jsxs)("div",{className:p.inputWrapper,children:[(0,u.jsx)(n.D0,{type:F?"text":"password",name:"oldPassword",className:`${p.input}`,placeholder:"Password"}),(0,u.jsx)("svg",{className:p.passwordToggleIcon,onClick:T(U),width:"20px",height:"20px",children:(0,u.jsx)("use",{xlinkHref:`${c.A}#${F?"icon-eye":"icon-eye-slash"}`})})]}),(0,u.jsx)(n.Kw,{name:"oldPassword",component:"p",className:p.errorMessage})]}),(0,u.jsxs)("div",{className:p.formGroupPassword,children:[(0,u.jsx)("label",{className:p.label,children:"New Password:"}),(0,u.jsxs)("div",{className:p.inputWrapper,children:[(0,u.jsx)(n.D0,{type:v?"text":"password",name:"password",className:`${p.input}`,placeholder:"Password"}),(0,u.jsx)("svg",{className:p.passwordToggleIcon,onClick:T(b),width:"20px",height:"20px",children:(0,u.jsx)("use",{xlinkHref:`${c.A}#${v?"icon-eye":"icon-eye-slash"}`})})]}),(0,u.jsx)(n.Kw,{name:"password",component:"p",className:p.errorMessage})]}),(0,u.jsxs)("div",{className:p.formGroupPassword,children:[(0,u.jsx)("label",{className:p.label,children:"Repeat new password:"}),(0,u.jsxs)("div",{className:p.inputWrapper,children:[(0,u.jsx)(n.D0,{type:I?"text":"password",name:"repeatPassword",className:`${p.input}`,placeholder:"Password"}),(0,u.jsx)("svg",{className:p.passwordToggleIcon,onClick:T(W),width:"20px",height:"20px",children:(0,u.jsx)("use",{xlinkHref:`${c.A}#${I?"icon-eye":"icon-eye-slash"}`})})]}),(0,u.jsx)(n.Kw,{name:"repeatPassword",component:"p",className:p.errorMessage})]})]})]}),(0,u.jsx)("div",{className:p.buttonWrapper,children:(0,u.jsx)("button",{type:"submit",className:`btn btn-blue ${p.button}`,disabled:r,children:"Save"})})]})})}})}}}]);
//# sourceMappingURL=884.1385bed1.chunk.js.map